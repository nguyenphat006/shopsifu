@startuml Auth - Forgot Password Activity
!theme plain
skinparam backgroundColor #FFFFFF
skinparam activityFontSize 12
skinparam activityFontColor #333333
skinparam activityBorderColor #666666
skinparam activityBackgroundColor #F7F7F7

title Hoạt Động: POST /auth/forgot-password

start
:Nhận { email, code, newPassword };
:Tìm user theo email;
if (Không có?) then (Có)
  :Ném EmailNotFound (422);
  stop
endif
:validateVerificationCode(FORGOT_PASSWORD);
:Hash newPassword;
fork
  :Cập nhật password;
fork again
  :Xóa verificationCode;
end fork
:Trả về 200 message;
stop

@enduml


