@startuml VNPay - Refund Sequence
!theme plain
skinparam backgroundColor #FFFFFF
skinparam sequenceArrowThickness 2
skinparam roundcorner 16

title Chi Tiết Luồng POST /payment/vnpay/refund

actor "Client" as C
participant "VNPayController" as VC
participant "VNPayService" as VS
participant "VnpayService" as VNS
participant "I18nService" as IS

C -> VC: POST /payment/vnpay/refund { orderId, orderInfo, amount, requestId, transactionNo, ipAddr, createBy }
activate VC

VC -> VS: refund(refundData)
activate VS

VS -> VNS: refund(refundRequest)
VNS --> VS: result

VS -> IS: t('payment.payment.vnpay.success.REFUND_SUCCESS')
IS --> VS: message
VS --> VC: { message, data: mapped result }
deactivate VS

VC --> C: 200 OK + JSON
deactivate VC

@enduml


