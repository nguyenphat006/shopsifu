@startuml Cart - Update Cart Item Activity
!theme plain
skinparam backgroundColor #FFFFFF
skinparam activityFontSize 12
skinparam activityFontColor #333333
skinparam activityBorderColor #666666
skinparam activityBackgroundColor #F7F7F7

title Hoạt Động: PUT /cart/:cartItemId

start
:Xác thực AccessToken và tải user context;
:Nhận cartItemId + body { skuId, quantity };
:ValidateSKU(isCreate=false): kiểm tra SKU, stock, publish status;
if (Hợp lệ?) then (Có)
  :Update cartItem theo id+userId;
  :Build message i18n;
  :Trả về 200 { message, data };
else (Không)
  :Ném 400/404 theo từng lỗi, hoặc 404 nếu cartItem không tồn tại;
endif
stop

@enduml


