@startuml User - Update Activity
!theme plain
skinparam backgroundColor #FFFFFF
skinparam activityFontSize 12
skinparam activityFontColor #333333
skinparam activityBorderColor #666666
skinparam activityBackgroundColor #F7F7F7

title Hoạt Động: PUT /users/:userId

start
:Nhận id + body + user + roleName;
:verifyYourself(user.userId, id);
if (Self?) then (Có)
  :Ném 403;
  stop
endif
:Lấy roleIdTarget theo userId;
:verifyRole(roleNameAgent, roleIdTarget);
if (Forbidden?) then (Có)
  :Ném 403;
  stop
endif
:Update user với updatedById;
:Build message i18n;
:Trả về 200 { message, data };
stop

@enduml


